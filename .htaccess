# ========================================================
# CloudLinux + Passenger Configuration (KEEP THIS BLOCK)
# ========================================================
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION BEGIN
PassengerAppRoot "/home/calleeol/fluidsms.com"
PassengerBaseURI "/"
PassengerNodejs "/home/calleeol/nodevenv/fluidsms.com/18/bin/node"
PassengerAppType node
PassengerStartupFile server.js
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION END


# ========================================================
# ✅ Security & SEO Enhancements
# ========================================================
<IfModule mod_headers.c>
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set Referrer-Policy "strict-origin-when-cross-origin"
  Header set X-XSS-Protection "1; mode=block"
</IfModule>

# ========================================================
# ✅ GZIP Compression (improves site speed)
# ========================================================
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript application/json
</IfModule>

# ========================================================
# ✅ Browser Caching (static assets)
# ========================================================
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresDefault "access plus 1 week"
</IfModule>

# ========================================================
# ✅ Rewrite Rules for Clean URLs & Error Handling
# ========================================================
RewriteEngine On

# Redirect www to non-www (optional, uncomment if desired)
# RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
# RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# Handle 404 for dynamic routes (Next.js)
ErrorDocument 404 /404.html
